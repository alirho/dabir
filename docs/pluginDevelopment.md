# ุฑุงูููุง ุชูุณุนู ูพูุงฺฏู

ุณุณุชู ูพูุงฺฏู ยซุฏุจุฑยป ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุนููฺฉุฑุฏ ูุฑุงุดฺฏุฑ ุฑุง ุจุฏูู ูุงุฒ ุจู ุชุบุฑ ูุณุชู ุงุตูุ ฺฏุณุชุฑุด ุฏูุฏ. ุดูุง ูโุชูุงูุฏ ูพุงุฑุณุฑูุง ุฌุฏุฏุ ูุงูุจุฑูุง ฺฉุจูุฑุฏุ ู ุฑูุชุงุฑูุง ุณูุงุฑุด ุฑุง ุงุฒ ุทุฑู ูพูุงฺฏูโูุง ุงุถุงูู ฺฉูุฏ.

## ุณุงุฎุชุงุฑ ฺฉ ูพูุงฺฏู

ฺฉ ูพูุงฺฏู ุฏุฑ ยซุฏุจุฑยป ฺฉ ฺฉูุงุณ ุฌุงูุง ุงุณฺฉุฑูพุช ุงุณุช ฺฉู ฺฉ ูุชุฏ ุงุณุชุงุชฺฉ ุจู ูุงู `install` ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.

```javascript
// src/plugins/myCoolPlugin.js

// ุจูุชุฑ ุงุณุช ุงุฒ ฺฉูุงุณ ูพุงู Plugin ุงุฑุซโุจุฑ ฺฉูุฏุ ูุฑฺูุฏ ุงูุฒุงู ูุณุช.
import Plugin from './plugin.js';

export class MyCoolPlugin extends Plugin {
    /**
     * ูุชุฏ ูุตุจ ูพูุงฺฏู. ุงู ูุชุฏ ุฏุฑ ุฒูุงู ุฑุงูโุงูุฏุงุฒ ูุฑุงุดฺฏุฑ ูุฑุงุฎูุงู ูโุดูุฏ.
     * @param {DabirEditor} editor - ูููููโุง ุงุฒ ฺฉูุงุณ ุงุตู ูุฑุงุดฺฏุฑ.
     * @param {object} options - ุชูุธูุงุช ฺฉู ุจู ุงู ูพูุงฺฏู ูพุงุณ ุฏุงุฏู ุดุฏู ุงุณุช.
     * @returns {object|void} - ฺฉ API ุงุฎุชุงุฑ ฺฉู ูพูุงฺฏู ูโุชูุงูุฏ ุงุฑุงุฆู ุฏูุฏ.
     */
    static install(editor, options) {
        console.log('MyCoolPlugin ูุตุจ ุดุฏ!', options);

        // ุฏุฑ ุงูุฌุง ูโุชูุงูุฏ ุจุง API ูุฑุงุดฺฏุฑ ุชุนุงูู ฺฉูุฏ.
        // ุจุฑุง ูุซุงูุ ฺฉ ูุงูุจุฑ ฺฉุจูุฑุฏ ุฌุฏุฏ ุซุจุช ฺฉูุฏ.
        editor.keyboardHandler.register('b', ['ctrl'], (event) => {
            document.execCommand('bold');
            return true; // ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฑูุชุงุฑ ูพุดโูุฑุถ ูุฑูุฑฺฏุฑ
        });

        // ูโุชูุงูุฏ ฺฉ API ุจุฑุง ูพูุงฺฏู ุฎูุฏ ุจุฑฺฏุฑุฏุงูุฏ.
        return {
            doSomethingCool: () => {
                alert('ุฎู ุจุงุญุงู!');
            }
        };
    }
}
```

### ุงุณุชูุงุฏู ุงุฒ ูพูุงฺฏู

```javascript
import DabirEditor from './src/index.js';
import { MyCoolPlugin } from './src/plugins/myCoolPlugin.js';

const editor = new DabirEditor('#editor', {
    plugins: [
        MyCoolPlugin, // ฺฉูุงุณ ูพูุงฺฏู ุฑุง ูพุงุณ ุฏูุฏ
    ]
});

// ุฏุณุชุฑุณ ุจู API ูพูุงฺฏู (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
const pluginApi = editor.plugins.get('MyCoolPlugin');
if (pluginApi && pluginApi.doSomethingCool) {
    pluginApi.doSomethingCool();
}
```

## Plugin API

ุฏุฑ ุฏุงุฎู ูุชุฏ `install`ุ ุดูุง ุจู ููููู ฺฉุงูู ูุฑุงุดฺฏุฑ (`editor`) ุฏุณุชุฑุณ ุฏุงุฑุฏ ู ูโุชูุงูุฏ ุงุฒ ุชูุงู ูุงฺููโูุง ู ูุชุฏูุง ุนููู ุขู ุงุณุชูุงุฏู ฺฉูุฏ:

-   **`editor.element`**: ุงููุงู ุงุตู ูุฑุงุดฺฏุฑ.
-   **`editor.events`**: ุจุฑุง ฺฏูุด ุฏุงุฏู ุง ุงูุชุดุงุฑ ุฑูุฏุงุฏูุง.
-   **`editor.selection`**: ุจุฑุง ฺฉุงุฑ ุจุง ุงูุชุฎุงุจ ูุชู ฺฉุงุฑุจุฑ.
-   **`editor.keyboardHandler`**: ุจุฑุง ุซุจุช ูุงูุจุฑูุง ฺฉุจูุฑุฏ.
-   **`editor.renderer`**: ุจุฑุง ุฏุณุชฺฉุงุฑ DOM.
-   **`editor.getHTML()` / `editor.getMarkdown()` / `editor.setContent()`**: ุจุฑุง ุชุนุงูู ุจุง ูุญุชูุง ูุฑุงุดฺฏุฑ.

## ฺฏุณุชุฑุด ูพุงุฑุณุฑ ูุงุฑฺฉโุฏุงูู

ฺฉ ุงุฒ ูุฏุฑุชููุฏุชุฑู ูุงุจูุชโูุง ูพูุงฺฏูโูุงุ ุงูุฒูุฏู ููุงูู ุฌุฏุฏ ุจู ูพุงุฑุณุฑ ูุงุฑฺฉโุฏุงูู ุงุณุช. ุดูุง ูโุชูุงูุฏ ูพุงุฑุณุฑูุง **ุจููฺฉ (Block)** ู **ุฏุฑููโุฎุท (Inline)** ุฑุง ฺฏุณุชุฑุด ุฏูุฏ.

### ุงูุฒูุฏู ูพุงุฑุณุฑ ุจููฺฉ

ุจุฑุง ุงูุฒูุฏู ฺฉ ุณูุชฺฉุณ ูุงุฑฺฉโุฏุงูู ุฌุฏุฏ ฺฉู ฺฉ ุจููฺฉ HTML ฺฉุงูู ุงุฌุงุฏ ูโฺฉูุฏ (ูุงููุฏ ุฌุนุจูโูุง ุชูุถุญ)ุ ุจุงุฏ ฺฉ ูุชุฏ ุจู ูุงู `markdownBlockParser` ุฏุฑ API ูพูุงฺฏู ุฎูุฏ ุจุฑฺฏุฑุฏุงูุฏ.

ุงู ูุชุฏ ุฏุฑ ูุฑ ุฎุท ุงุฒ ูุญุชูุง ูุฑูุฏ ูุฑุงุฎูุงู ูโุดูุฏ ู ุงฺฏุฑ ุณูุชฺฉุณ ููุฑุฏ ูุธุฑ ุฑุง ูพุฏุง ฺฉูุฏุ ุจุงุฏ ฺฉ ุขุจุฌฺฉุช ุดุงูู HTML ููุง ู ุงูุฏฺฉุณ ุขุฎุฑู ุฎุท ูพุฑุฏุงุฒุดโุดุฏู ุฑุง ุจุฑฺฏุฑุฏุงูุฏ.

#### ูุซุงู: ูพูุงฺฏู Emoji

ุจุงุฏ ฺฉ ูพูุงฺฏู ุณุงุฏู ุจุณุงุฒู ฺฉู ฺฉ ุฎุท ูุงููุฏ `::emoji:: smile` ุฑุง ุจู ฺฉ ูพุงุฑุงฺฏุฑุงู ุจุง ฺฉ ุงููุฌ ุจุฒุฑฺฏ ุชุจุฏู ูโฺฉูุฏ.

```javascript
// src/plugins/emojiBlockPlugin.js
import Plugin from './plugin.js';

const EMOJIS = {
    smile: '๐',
    heart: 'โค๏ธ',
    rocket: '๐'
};

export class EmojiBlockPlugin extends Plugin {
    static install(editor) {
        // API ูพูุงฺฏู ุฑุง ุจุฑฺฏุฑุฏุงูุฏ
        return {
            markdownBlockParser: this.parseMarkdownBlock.bind(this)
        };
    }

    /**
     * ูพุงุฑุณุฑ ุณูุงุฑุด ุจุฑุง ุจููฺฉ ุงููุฌ.
     * @param {string[]} lines - ุชูุงู ุฎุทูุท ูุชู.
     * @param {number} currentIndex - ุงูุฏฺฉุณ ุฎุท ูุนู ฺฉู ุจุงุฏ ูพุฑุฏุงุฒุด ุดูุฏ.
     * @returns {{html: string, lastIndex: number}|null}
     */
    static parseMarkdownBlock(lines, currentIndex) {
        const line = lines[currentIndex].trim();
        const match = line.match(/^::emoji::\s+(\w+)/);

        if (!match) {
            return null; // ุงฺฏุฑ ุณูุชฺฉุณ ููุฑุฏ ูุธุฑ ูพุฏุง ูุดุฏุ null ุจุฑฺฏุฑุฏุงูุฏ
        }

        const emojiName = match[1];
        const emojiChar = EMOJIS[emojiName] || 'โ';

        const html = `<div style="font-size: 3rem; text-align: center;">${emojiChar}</div>`;

        // ุงู ูพุงุฑุณุฑ ููุท ฺฉ ุฎุท ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ
        return {
            html: html,
            lastIndex: currentIndex 
        };
    }
}
```

## Best Practices

-   **ุชูุฒ ูฺฏู ุฏุงุดุชู ฺฉุฏ:** ููุทู ูพูุงฺฏู ุฎูุฏ ุฑุง ุฏุฑ ฺฉูุงุณ ูุฑุจูุท ุจู ุฎูุฏุด ูฺฏู ุฏุงุฑุฏ.
-   **ุนููฺฉุฑุฏ:** ุงุฒ ุงูุฌุงู ุนููุงุช ุณูฺฏู ุฏุฑ ุฑูุฏุงุฏูุง ฺฉู ุจู ุทูุฑ ูฺฉุฑุฑ ูุฑุงุฎูุงู ูโุดููุฏ (ูุงููุฏ `input`) ุฎูุฏุฏุงุฑ ฺฉูุฏ. ุฏุฑ ุตูุฑุช ูุงุฒ ุงุฒ `debounce` ุงุณุชูุงุฏู ฺฉูุฏ.
-   **ุนุฏู ุฏุณุชฺฉุงุฑ ูุณุชูู `innerHTML`**: ุชุง ุญุฏ ุงูฺฉุงู ุงุฒ `editor.renderer` ุจุฑุง ุฏุณุชฺฉุงุฑ DOM ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุงุฒ ุณุงุฒฺฏุงุฑ ุจุง ุขูุฏู ุงุทููุงู ุญุงุตู ุดูุฏ.
-   **ูุงูโฺฏุฐุงุฑ ููุญุตุฑ ุจู ูุฑุฏ:** ุจุฑุง ฺฉูุงุณ ูพูุงฺฏู ุฎูุฏ ฺฉ ูุงู ููุญุตุฑ ุจู ูุฑุฏ ุงูุชุฎุงุจ ฺฉูุฏ ุชุง ุจุง ูพูุงฺฏูโูุง ุฏฺฏุฑ ุชุฏุงุฎู ูพุฏุง ูฺฉูุฏ.
